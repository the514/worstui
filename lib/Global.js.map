{"version":3,"sources":["../src/Global.js"],"names":["hope","Global","globalUrl","key","obj","columnsDataSource","response","localStorage","setItem","headers","removeItem","window","location","hash","getItem","props","console","log","status","openNotification","type","title","body","fadeOut","message","description","token","LoadingStart","fadeIn","LoadingEnd"],"mappings":"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","file":"Global.js","sourcesContent":["import React, { Component } from 'react';\nimport { notification } from 'antd';\n// import axios from 'axios';\nimport $ from 'jquery';\nimport Config from './Modules/Config';\n\nvar hope = \"\"; // 有些变量不是拿来用的, 是值得占有一部分内存的希望.\n\nclass Global extends Component {\n\n    static LoadingStart = () => {\n      $(\".loading\").fadeIn();\n\t  }\n\n    static LoadingEnd = () => {\n      $(\".loading\").fadeOut();\n    }\n\n    static getUrl () {\n      return Config.globalUrl();\n    }\n\n    static getFileUrl () {\n      return Config.globalUrl();\n    }\n\n    static columnsDataSource (key) {\n      let obj = Config.columnsDataSource(key);\n      return obj;\n    }\n\n    static setTokenHeader(response) {\n      localStorage.setItem(\"admin-access-token\", response.headers[\"access-token\"]);\n      localStorage.setItem(\"admin-client\", response.headers[\"client\"]);\n      localStorage.setItem(\"admin-uid\", response.headers[\"uid\"]);\n      localStorage.setItem(\"admin-expiry\", response.headers[\"expiry\"]);\n    }\n\n    static setLoginTokenHeader(response) {\n      localStorage.removeItem(\"admin-access-token\");\n      localStorage.removeItem(\"admin-client\");\n      localStorage.removeItem(\"admin-uid\");\n      localStorage.removeItem(\"admin-expiry\");\n\n      // if (response.headers[\"uid\"]===\"1\") {\n      //   localStorage.setItem(\"admin-access-token\", response.headers[\"access-token\"]);\n      //   localStorage.setItem(\"admin-client\", response.headers[\"client\"]);\n      //   localStorage.setItem(\"admin-uid\", response.headers[\"uid\"]);\n      //   localStorage.setItem(\"admin-expiry\", response.headers[\"expiry\"]);\n      // }\n      localStorage.setItem(\"admin-access-token\", response.headers[\"access-token\"]);\n      localStorage.setItem(\"admin-client\", response.headers[\"client\"]);\n      localStorage.setItem(\"admin-uid\", response.headers[\"uid\"]);\n      localStorage.setItem(\"admin-expiry\", response.headers[\"expiry\"]);\n      \n    }\n\n    static signOut(response) {\n      localStorage.removeItem(\"admin-access-token\");\n      localStorage.removeItem(\"admin-client\");\n      localStorage.removeItem(\"admin-uid\");\n      localStorage.removeItem(\"admin-expiry\");\n      window.location.hash = \"#login\";\n    }\n\n    static getHeader() {\n      return {\n        headers: {\n          'Content-type': 'application/json',\n          'Accept': 'application/json',\n          'access-token': localStorage.getItem(\"admin-access-token\"),\n          'client': localStorage.getItem(\"admin-client\"),\n          'uid': localStorage.getItem(\"admin-uid\"),\n          'expiry': localStorage.getItem(\"admin-expiry\"),\n          'token-type': 'Bearer'\n        }\n      }\n    }\n\n\n    static getAuth (props) {\n      if (props.response) {\n        console.log(props.response)\n        if (props.response.status === 401) {\n          if (localStorage.getItem(\"admin-access-token\")) {\n            Global.openNotification({type:\"error\", title:\"账号认证失败\", body:\"请重新登录！\"});\n          }\n          window.location.hash = \"#login\";\n          $(\".loading\").fadeOut();\n        }\n      }else {\n        Global.openNotification({type:\"error\", title:\"操作失败\", body:\"请求超时，请刷新重试！\"});\n      }\n    }\n\n    static openNotification (props) {\n      notification[props.type]({\n        message: props.title,\n        description: props.body,\n      });\n    }\n\n    static getToken () {\n      var token = \"\";\n      if (localStorage.getItem(\"token\")) {\n        token = \"?token=\" + localStorage.getItem(\"token\");\n      }\n      return token;\n    }\n\n    render() {\n      return (\n      \t<div></div>\n      );\n    }\n}\n\nexport default Global;"]}