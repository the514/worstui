{"version":3,"sources":["../src/Table.js"],"names":["Sider","Footer","ButtonGroup","Group","Table","props","onOpenChange","openKeys","console","log","state","latestOpenKey","find","indexOf","key","latestCloseKey","nextOpenKeys","getAncestorKeys","concat","setState","signOut","map","onCollapse","collapsed","type","mode","signOutButton","selectedKeys","currentHash","currentTitle","tableTpl","selectMenu","bind","window","location","hash","text","projectCn","title","nav","item","logoStyle","display","margin","width","height","position","overflow","background","transition","logo","textAlign","marginBottom","localStorage","getItem","navTpl","router","copyright"],"mappings":"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","file":"Table.js","sourcesContent":["import React, { Component } from 'react';\nimport { Layout, Button } from 'antd';\nimport $ from 'jquery';\nimport Global from './Global';\nimport Config from './Modules/Config';\n\nconst { Sider, Footer } = Layout;\n// const SubMenu = Menu.SubMenu;\nconst ButtonGroup = Button.Group;\n\nclass Table extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedKeys: ['#'],\n      openKeys: ['sub1'],\n      collapsed: false,\n      signOutButton: \"block\",\n      mode: 'inline',\n      currentHash: \"#/\",\n      currentTitle: \"\",\n      tableTpl: null\n    };\n\n    this.selectMenu = this.selectMenu.bind(this);\n    this.signOut = this.signOut.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      selectedKeys: [window.location.hash],\n      openKeys: this.props.openKeys?this.props.openKeys:[],\n    });\n\n    $(\"title\").text( Config.projectCn().title );\n\n    Config.nav(this);\n  }\n\n  componentDidUpdate(props){\n    // console.log(window.location.hash);\n  }\n\n  onOpenChange = (openKeys) => {\n\n    console.log(openKeys);\n    const state = this.state;\n    const latestOpenKey = openKeys.find(key => !(state.openKeys.indexOf(key) > -1));\n    const latestCloseKey = state.openKeys.find(key => !(openKeys.indexOf(key) > -1));\n\n    let nextOpenKeys = [];\n    if (latestOpenKey) {\n      nextOpenKeys = this.getAncestorKeys(latestOpenKey).concat(latestOpenKey);\n    }\n    if (latestCloseKey) {\n      nextOpenKeys = this.getAncestorKeys(latestCloseKey);\n    }\n    this.setState({ openKeys: nextOpenKeys });\n  }\n\n  signOut = () => {\n    Global.signOut();\n  }\n  \n  getAncestorKeys = (key) => {\n    const map = {\n    };\n    return map[key] || [];\n  }\n\n  onCollapse = (collapsed, type) => {\n    // console.log(collapsed);\n    // console.log(type);\n    this.setState({\n      collapsed,\n      mode: collapsed ? 'vertical' : 'inline',\n      signOutButton: collapsed ? 'none' : 'block'\n    });\n\n  }\n\n  // onSelect( item, key, selectedKeys ) { \n  //   console.log(item);\n  //   console.log(key);\n  //   console.log(selectedKeys);\n  // }\n\n  selectMenu(item) {\n    // console.log(item);\n    // console.log(item.item.props.title);\n    this.setState({selectedKeys: [item.key]});\n    window.location.hash = item.key;\n  }\n\n  render() {\n    const logoStyle = {\n      display: 'block',\n      margin: '0 auto',\n    };\n\n    return (\n      <Layout style={{ width: '100%', height: '100%', position: 'absolute', overflow: 'hidden' }}>\n\t      <Sider\n\t        collapsible\n\t        collapsed={this.state.collapsed}\n\t        onCollapse={this.onCollapse}\n\t        style={{ background: '#fff', transition: 'none' }}\n\t      >\n\t        <div className=\"logo\">\n\t          <img src={Config.logo()} width=\"35\" alt=\"logo\" style={logoStyle} />\n\t        </div>\n          <div className=\"user\" style={{width: \"100%\", textAlign: \"center\", marginBottom: \"20px\", display: this.state.signOutButton}}>\n            <ButtonGroup>\n              <Button>{localStorage.getItem(\"admin-uid\")?(localStorage.getItem(\"admin-uid\")===\"1\"?\"admin\":localStorage.getItem(\"admin-uid\")):\"无\"}</Button>\n              <Button type=\"primary\" icon=\"poweroff\" onClick={this.signOut}>退出</Button>\n            </ButtonGroup>\n          </div>\n\n            { Config.navTpl(this) }\n\n      \t</Sider>\n      \t<Layout className=\"animate-content\" style={{ overflow: 'auto' }}>\n\n      \t\t{ Config.router() }\n\n          <Footer style={{ textAlign: 'center' }}>\n            { Config.projectCn().copyright }\n          </Footer>\n      \t</Layout>\n      </Layout>\n    );\n  }\n\n}\n\nexport default Table;\n"]}