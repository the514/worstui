{"version":3,"sources":["../../src/TplBox/Ckeditor.js"],"names":["CKEditor","props","state","value","config","height","toolbarGroups","name","groups","removeButtons","onChange","mode","window","CKEDITOR","console","error","instance","appendTo","findDOMNode","thisClass","on","setState","e","getData","handleChange","setData"],"mappings":"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","file":"Ckeditor.js","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nclass CKEditor extends Component {\n\t\tconstructor(props) {\n\t\t\t\tsuper(props);\n\t\t\t\tthis.state = {\n\t\t\t\t\t\tvalue: props.value || \"<p></p>\",\n\t\t\t\t\t\tconfig: {\n\t\t\t\t\t\t\theight: 300,\n\t\t\t\t\t\t\ttoolbarGroups: [\n\t\t\t\t\t\t\t\t{ name: 'document', groups: [ 'mode', 'document', 'doctools' ] },\n\t\t\t\t\t\t\t\t{ name: 'clipboard', groups: [ 'clipboard', 'undo' ] },\n\t\t\t\t\t\t\t\t{ name: 'editing', groups: [ 'find', 'selection', 'spellchecker', 'editing' ] },\n\t\t\t\t\t\t\t\t{ name: 'forms', groups: [ 'forms' ] },\n\t\t\t\t\t\t\t\t{ name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },\n\t\t\t\t\t\t\t\t{ name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi', 'paragraph' ] },\n\t\t\t\t\t\t\t\t{ name: 'links', groups: [ 'links' ] },\n\t\t\t\t\t\t\t\t{ name: 'insert', groups: [ 'insert' ] },\n\t\t\t\t\t\t\t\t{ name: 'colors', groups: [ 'colors' ] },\n\t\t\t\t\t\t\t\t{ name: 'styles', groups: [ 'styles' ] },\n\t\t\t\t\t\t\t\t{ name: 'tools', groups: [ 'tools' ] },\n\t\t\t\t\t\t\t\t{ name: 'about', groups: [ 'about' ] },\n\t\t\t\t\t\t\t\t{ name: 'others', groups: [ 'others' ] }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tremoveButtons: 'Save,NewPage,Preview,Templates,Cut,Copy,Paste,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Subscript,Superscript,CreateDiv,Language,PageBreak,Smiley,ShowBlocks'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonChange: props.onChange,\n\t\t\t\t\t\tmode: \"wysiwyg\"\n\t\t\t\t}\n\n\t\t}\n\n\t\thandleChange() {\n\t\t\tthis.state.onChange(this.state.value || \"<p></p>\");\n\t\t}\n\n\t\tcomponentDidMount(props) {\n\t\t\tif (!window.CKEDITOR) {\n\t\t\t\tconsole.error('CKEditor not found');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis.instance = window.CKEDITOR.appendTo(ReactDOM.findDOMNode(this), this.state.config, this.state.value);\n\n\t\t\tlet thisClass = this;\n\t\t\t// setInterval((function(){\n\t\t\t// \tthisClass.setState({value: thisClass.instance.getData()});\n\t\t\t// \tthisClass.handleChange(thisClass.instance.getData());\n\t\t\t// }), 50);\n\n\t\t\tthis.instance.on('mode', function() {\n\t\t\t\t// console.log(this.mode);\n\t\t\t\tthisClass.setState({mode:this.mode});\n\t\t\t\tthisClass.instance.on('change', (e) => {\n\t\t\t\t\tthisClass.setState({value: thisClass.instance.getData()});\n\t\t\t\t\tthisClass.handleChange(thisClass.instance.getData());\n\t\t\t\t});\n\n\t\t\t\t// if (this.mode === \"wysiwyg\") {\n\t\t\t\t// \tthisClass.instance.on('change', (e) => {\n\t\t\t\t// \t\tthisClass.handleChange(thisClass.instance.getData());\n\t\t\t\t// \t\tif (thisClass.instance.getData()!==\"\") {\n\t\t\t\t// \t\t\tthisClass.setState({value: thisClass.instance.getData()});\n\t\t\t\t// \t\t\tthisClass.handleChange();\n\t\t\t\t// \t\t}else {\n\t\t\t\t// \t\t\tthisClass.setState({value: \"<p></p>\"});\n\t\t\t\t// \t\t\tthisClass.handleChange();\n\t\t\t\t// \t\t}\n\t\t\t\t// \t});\n\t\t\t\t// }else if (this.mode === \"source\") {\n\t\t\t\t// \tthisClass.instance.on('key', (e) => {\n\t\t\t\t// \t\tthisClass.handleChange(thisClass.instance.getData());\n\t\t\t\t// \t\tif (thisClass.instance.getData()!==\"\") {\n\t\t\t\t// \t\t\tthisClass.setState({value: thisClass.instance.getData()});\n\t\t\t\t// \t\t\tthisClass.handleChange();\n\t\t\t\t// \t\t}else {\n\t\t\t\t// \t\t\tthisClass.setState({value: \"<p></p>\"});\n\t\t\t\t// \t\t\tthisClass.handleChange();\n\t\t\t\t// \t\t}\n\t\t\t\t// \t});\n\t\t\t\t// }\n\t\t\t});\n\n\t\t\tif(!this.instance){return}\n\n\t\t\tthis.instance.setData(this.props.value);\n\n\t\t\tthis.setState({\n\t\t\t\tvalue: this.state.value\n\t\t\t})\n\n\t\t}\n\n\t\tcomponentDidUpdate(props){\n\t\t\t// console.log(props.value);\n\t\t\t// console.log(this.instance.getData());\n\t\t\t// console.log('updating', this.state);\n\t\t}\n\n\t\tcomponentWillReceiveProps(props) {\n\t\t}\n\n\t\trender() {\n\t\t\treturn (<div></div>);\n\t\t}\n}\n\nexport default CKEditor;"]}