{"version":3,"sources":["../../src/TplBox/SelectBox.js"],"names":["Option","SelectBox","props","value","state","data","options","selectLinkageValue","selectLinkageOption","selectLinkageTpl","config","getHeader","LoadingStart","modeUrl","modelUrl","modelDataKey","modelDataValue","modelDataColumn","modelDataParams","modelDataLinkage","length","selectTplData","thisClass","get","getUrl","then","response","headers","setTokenHeader","list","each","index","val","push","params","i","v","setState","updateOption","LoadingEnd","catch","error","openNotification","type","title","body","console","log","getAuth","isFilter","filterText","modelJson","map","d","updateOneOption","undefined","selectTpl","triggerChange","changedValue","onChange","Object","assign","handleChange","handleLinkageSelect","placeholder","marginRight","handleLinkageChange","e","o","modelUrlLength","linkKey","join"],"mappings":"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","file":"SelectBox.js","sourcesContent":["import React, { Component } from 'react';\nimport Global from '../Global';\nimport axios from 'axios';\nimport { Select } from 'antd';\nimport $ from 'jquery';\nconst Option = Select.Option;\nclass SelectBox extends Component {\n\n  constructor(props) {\n    super(props);\n    const value = props.value || \"\";\n    this.state = {\n    \tdata: [],\n      value: value,\n    \toptions: [],\n      selectLinkageValue: [], // 联查值\n      selectLinkageOption: [], // 联查选项\n      selectLinkageTpl: null // 联查模版\n    };\n  }\n\n  componentDidMount(props) {\n    const config = Global.getHeader();\n    Global.LoadingStart();\n\n    let modeUrl = this.props.modelUrl; // 请求地址\n    let modelDataKey = this.props.modelDataKey; // 数据key\n    let modelDataValue = this.props.modelDataValue; // 数据value名\n    let modelDataColumn = this.props.modelDataColumn; // edit模式下显示数据字段名\n    let modelDataParams = this.props.modelDataParams; // edit模式下选中对应项\n\n    // 判断是否是联查select\n    if (this.props.modelDataLinkage && modeUrl.length > 0) {\n      let selectTplData = []; // select所需数据\n      // let selectTpl = []; // select样式\n      let options = []; // option选项\n      let value = []; // 联查值\n\n      let thisClass = this;\n\n      // 如果有值 通常在edit模式下\n      if (this.props.value) {\n\n        // console.log(this.props.value);\n\n        axios.get(Global.getUrl() + modeUrl[modeUrl.length - 1] + \"?q[id_eq]=\" + this.props.value, config)\n          .then(response => {\n            if (response.headers[\"access-token\"]) {\n              Global.setTokenHeader(response);\n            }\n\n            // console.log(response.data.list);\n\n            selectTplData = response.data.list;\n            if (selectTplData.length > 0) {\n\n              $.each(modelDataColumn, function(index, val) {\n                if (modelDataColumn.length - 1 === index) {\n                  value.push(thisClass.state.value + \"\");\n                }else{\n                  value.push(selectTplData[0][modelDataColumn[index]] + \"\");\n                }\n              });\n\n            }\n\n            $.each(modeUrl, function(index, val) {\n\n              options[index] = [];\n              let params = \"\";\n              // console.log(value[index]);\n              if (modelDataParams[index]!==\"\") {\n                if (index > 0 ) {\n                  params = \"?\"+modelDataParams[index]+\"=\" + value[index - 1];\n                }else{\n                  params = \"\";\n                }\n              }else{\n                params = \"\";\n              }\n\n              // console.log(index);\n              // console.log(value[index]);\n              // console.log(Global.getUrl() + modeUrl[index] + params);\n\n              axios.get(Global.getUrl() + modeUrl[index] + params, config)\n                .then(response => {\n                  if (response.headers[\"access-token\"]) {\n                    Global.setTokenHeader(response);\n                  }\n\n                  // console.log(response.data.list);\n\n                  selectTplData = response.data.list;\n\n                  $.each(selectTplData, function(i, v) {\n                    options[index].push(<Option linkKey={index} key={selectTplData[i][modelDataValue[index]]} value={selectTplData[i][modelDataValue[index]]+\"\"}>{selectTplData[i][modelDataKey[index]]}</Option>);\n                  });\n\n                  thisClass.setState({selectLinkageOption: options});\n\n                  thisClass.updateOption();\n\n                  Global.LoadingEnd();\n                })\n                .catch(function (error) {\n                  Global.openNotification({type:\"error\", title:\"操作失败\", body:\"请求超时，请刷新重试！\"});\n                  console.log(error);\n                  Global.getAuth(error);\n                  Global.LoadingEnd();\n                });\n            });\n\n            // console.log(value);\n\n            thisClass.setState({\n              selectLinkageValue: value\n            });\n\n            Global.LoadingEnd();\n          })\n          .catch(function (error) {\n            Global.openNotification({type:\"error\", title:\"操作失败\", body:\"请求超时，请刷新重试！\"});\n            console.log(error);\n            Global.getAuth(error);\n            Global.LoadingEnd();\n          });\n\n      // 如果无值 在add模式下或筛选模式\n      }else{\n        $.each(modeUrl, function(index, val) {\n          \n          options[index] = [];\n\n          if (index>0) {\n\n            options[index] = [];\n            if (thisClass.props.isFilter) {\n              options[index].push(<Option linkKey={index} key={-1} value=\"\">{thisClass.props.filterText[index]}</Option>)\n            }\n\n            thisClass.setState({selectLinkageOption: options});\n\n            thisClass.updateOption();\n\n          }else{\n\n            axios.get(Global.getUrl() + modeUrl[index], config)\n              .then(response => {\n                if (response.headers[\"access-token\"]) {\n                  Global.setTokenHeader(response);\n                }\n\n                // console.log(response.data.list);\n\n                selectTplData = response.data.list;\n\n                if (thisClass.props.isFilter) {\n                  options[index].push(<Option linkKey={index} key={-1} value=\"\">{thisClass.props.filterText[index]}</Option>)\n                }\n\n                $.each(selectTplData, function(i, v) {\n                  options[index].push(<Option linkKey={index} key={selectTplData[i][modelDataValue[index]]} value={selectTplData[i][modelDataValue[index]]+\"\"}>{selectTplData[i][modelDataKey[index]]}</Option>);\n                });\n\n                thisClass.setState({selectLinkageOption: options});\n\n                thisClass.updateOption();\n\n                Global.LoadingEnd();\n              })\n              .catch(function (error) {\n                Global.openNotification({type:\"error\", title:\"操作失败\", body:\"请求超时，请刷新重试！\"});\n                console.log(error);\n                Global.getAuth(error);\n                Global.LoadingEnd();\n              });\n\n          }\n\n        });\n      }\n \n    // 如果不是联查select  \n    }else{\n      let options = [];\n      // let selectTpl = [];\n      // 异步请求才会刷新state 非异步需要手动更新state\n      // console.log(this.props.modelJson);\n\n      // 本地数据select\n      if (this.props.modelJson) {\n        this.setState({data: this.props.modelJson.list});\n        // console.log(response.data.list);\n        if(this.props.filterText){\n          options.push(<Option key={-1} value=\"\">{this.props.filterText}</Option>);\n          this.props.modelJson.list.map(d => \n            options.push(<Option key={d[this.props.modelDataValue]} value={d[this.props.modelDataValue]+\"\"}>{d[this.props.modelDataKey]}</Option>)\n          );\n        }else{\n          this.props.modelJson.list.map(d => \n            options.push(<Option key={d[this.props.modelDataValue]} value={d[this.props.modelDataValue]+\"\"}>{d[this.props.modelDataKey]}</Option>)\n          );\n        }\n\n        this.setState({options: options});\n\n        this.updateOneOption(undefined, options);\n\n        Global.LoadingEnd();\n\n      // 请求数据select\n      }else {\n        axios.get(Global.getUrl() + this.props.modelUrl, config)\n          .then(response => {\n            if (response.headers[\"access-token\"]) {\n              Global.setTokenHeader(response);\n            }\n            // console.log(response.data.list);\n            this.setState({data: response.data.list});\n            // console.log(response.data.list);\n            if(this.props.filterText){\n              options.push(<Option key={-1} value=\"\">{this.props.filterText}</Option>);\n              this.state.data.map(d => \n                options.push(<Option key={d[this.props.modelDataValue]} value={d[this.props.modelDataValue]+\"\"}>{d[this.props.modelDataKey]}</Option>)\n              );\n            }else{\n              this.state.data.map(d => \n                options.push(<Option key={d[this.props.modelDataValue]} value={d[this.props.modelDataValue]+\"\"}>{d[this.props.modelDataKey]}</Option>)\n              );\n            }\n\n            // console.log(this.props.value);\n            // console.log(this.state.value);\n\n            this.setState({options: options});\n\n            this.updateOneOption();\n\n            Global.LoadingEnd();\n          })\n          .catch(function (error) {\n            Global.openNotification({type:\"error\", title:\"操作失败\", body:\"请求超时，请刷新重试！\"});\n            console.log(error);\n            Global.getAuth(error);\n            Global.LoadingEnd();\n          });\n      }\n\n    }\n\n    // console.log(this.props.value);\n  }\n\n  triggerChange = (changedValue) => {\n    // Should provide an event to pass value to Form.\n    const onChange = this.props.onChange;\n    if (onChange) {\n      onChange(Object.assign(changedValue));\n    }\n  }\n\n  handleChange = (value) => {\n    console.log(value);\n  \tthis.setState({ value: value });\n    this.triggerChange(value);\n\n    this.updateOneOption(value);\n  }\n\n  updateOption = (value, options) => {\n    let thisClass = this;\n    let selectTpl = [];\n\n    $.each(this.state.selectLinkageOption, function(index, val) {\n\n      // 无值\n      if (value !== undefined) {\n        selectTpl.push(<Select key={index} value={value+\"\"} onSelect={thisClass.handleLinkageSelect} placeholder={thisClass.props.placeholder[index]}>\n                      {thisClass.state.selectLinkageOption[index]}\n                    </Select>);\n      // 有值\n      }else{\n        // 如果是筛选模式\n        if (thisClass.props.isFilter) {\n          selectTpl.push(<Select style={{marginRight: (index===thisClass.state.selectLinkageOption.length-1?0:5)}} key={index} value={thisClass.state.selectLinkageValue[index]?thisClass.state.selectLinkageValue[index]:\"\"} onSelect={thisClass.handleLinkageSelect} placeholder={thisClass.props.placeholder[index]}>\n                        {thisClass.state.selectLinkageOption[index]}\n                      </Select>);\n        // 不是筛选模式\n        }else {\n          // console.log(this.state.options);\n          selectTpl.push(<Select key={index} value={thisClass.state.selectLinkageValue[index]} onSelect={thisClass.handleLinkageSelect} placeholder={thisClass.props.placeholder[index]}>\n                        {thisClass.state.selectLinkageOption[index]}\n                      </Select>);\n        }\n      }\n\n    });\n\n    // console.log(selectTpl);\n\n    this.setState({selectLinkageTpl: selectTpl});\n  }\n\n  updateOneOption = (value, options) => {\n    let selectTpl = [];\n    // console.log(value);\n    // console.log(this.props.value);\n\n    // 无值\n    if (value !== undefined) {\n      selectTpl.push(<Select key={1} value={value+\"\"} onChange={this.handleChange} placeholder={this.props.placeholder}>\n                    {this.state.options}\n                  </Select>);\n    // 有值\n    }else{\n      // 如果是筛选模式\n      if (this.props.isFilter) {\n        selectTpl.push(<Select key={1} value={\"\"} onChange={this.handleChange} placeholder={this.props.placeholder}>\n                      {this.state.options}\n                    </Select>);\n      // 不是筛选模式\n      }else {\n        // console.log(this.state.options);\n        selectTpl.push(<Select key={1} value={this.props.value?this.state.value+\"\":undefined} onChange={this.handleChange} placeholder={this.props.placeholder}>\n                      {options?options:this.state.options}\n                    </Select>);\n      }\n    }\n\n    this.setState({selectLinkageTpl: selectTpl});\n  }\n\n  handleLinkageChange = (e) => {\n    console.log(e);\n  }\n\n  handleLinkageSelect = (v, o) => {\n    const config = Global.getHeader();\n    Global.LoadingStart();\n\n    let thisClass = this;\n    let modelUrl = this.props.modelUrl; // 请求地址\n    let modelDataKey = this.props.modelDataKey; // 数据key\n    let modelDataValue = this.props.modelDataValue;  // 数据value名\n    let modelUrlLength = this.props.modelUrl.length; // select联动长度\n    let modelDataParams = this.props.modelDataParams; // edit模式下选中对应项\n    let selectTplData = [];\n\n    let options = this.state.selectLinkageOption;\n    \n    if ((o.props.linkKey + 1) < modelUrlLength) { // 如果当前select的linkKey + 1 小于 配置联查接口长度\n\n      let value = this.state.selectLinkageValue; \n      if (o.props.linkKey === 0) { // 如果当前select的linkKey === 0\n        value = []; \n      }\n      value[o.props.linkKey] = o.props.value; // 设置第1个select的值为 props.value\n      value[o.props.linkKey + 1] = undefined; // 设置下一个select的值为 undefined\n      if (thisClass.props.isFilter) {\n        value[o.props.linkKey + 1] = \"\"; // 设置下一个select的值为 \"\"\n      }\n      // value[1] = o.props.value;\n      this.setState({selectLinkageValue: value});\n\n      let params = \"\";\n      if (modelDataParams[o.props.linkKey + 1]!==\"\") { // 判断下一个select的配置项不为空\n        params = \"?\"+modelDataParams[o.props.linkKey + 1]+\"=\" + o.props.value; // 进行联查\n      }else{\n        params = \"\"; // 什么也不做\n      }\n\n      axios.get(Global.getUrl() + modelUrl[o.props.linkKey + 1] + params, config) // 进行联查请求\n        .then(response => {\n          if (response.headers[\"access-token\"]) {\n            Global.setTokenHeader(response);\n          }\n          // console.log(response.data.list);\n\n          selectTplData = response.data.list;\n\n          options[o.props.linkKey + 1] = []; // 初始化下一个select为空值\n          \n          if (thisClass.props.isFilter) {\n            options[o.props.linkKey + 1].push(<Option linkKey={o.props.linkKey + 1} key={-1} value={\"\"}>{thisClass.props.filterText[o.props.linkKey + 1]}</Option>);\n          }\n\n          $.each(selectTplData, function(i, v) {\n            options[o.props.linkKey + 1].push(<Option linkKey={o.props.linkKey + 1} key={selectTplData[i][modelDataValue[o.props.linkKey + 1]]} value={selectTplData[i][modelDataValue[o.props.linkKey + 1]]+\"\"}>{selectTplData[i][modelDataKey[o.props.linkKey + 1]]}</Option>);\n          });\n\n          // 为下一个select装填option项\n\n          // 如果后面有两个select存在 同样设置为空值\n          if (o.props.linkKey + 2 <= modelUrlLength - 1) {\n            options[o.props.linkKey + 2] = [];\n            if (thisClass.props.isFilter) {\n              options[o.props.linkKey + 2].push(<Option linkKey={o.props.linkKey + 2} key={-1} value={\"\"}>{thisClass.props.filterText[o.props.linkKey + 2]}</Option>);\n            }\n          }\n\n          // console.log(options);\n\n          this.setState({\n            selectLinkageOption: options\n          });\n\n          if (this.props.isFilter) {\n            this.triggerChange(value.join(\",\"));\n          }\n\n          this.updateOption();\n\n          Global.LoadingEnd();\n        })\n        .catch(function (error) {\n          Global.openNotification({type:\"error\", title:\"操作失败\", body:\"请求超时，请刷新重试！\"});\n          console.log(error);\n          Global.getAuth(error);\n          Global.LoadingEnd();\n        });\n       \n    }else if ((o.props.linkKey + 1) === modelUrlLength) { // 如果 下一个select 大于配置项的长度\n\n      let value = this.state.selectLinkageValue; \n      value[o.props.linkKey] = o.props.value; // 只改变当前值\n      // value[o.props.linkKey + 1] = undefined;\n      // value[1] = o.props.value;\n      this.setState({selectLinkageValue: value});\n      this.setState({ value: o.props.value });\n      if (this.props.isFilter) {\n        this.triggerChange(value.join(\",\"));\n      }else {\n        this.triggerChange(o.props.value);\n      }\n\n      this.setState({\n        selectLinkageOption: options\n      });\n\n      this.updateOption();\n      Global.LoadingEnd();\n    }\n\n    // console.log(this.state.selectLinkageOption);\n\n  }\n\n  render() {\n    let selectTpl = null;\n\n    selectTpl = this.state.selectLinkageTpl;\n\n    return (\n      <div>\n        { \n          selectTpl\n        }\n      </div>  \n    );\n  }\n}\n\nexport default SelectBox;\n"]}