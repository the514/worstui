{"version":3,"sources":["../../src/TplBox/CkeditorImg.js"],"names":["CkeditorImg","props","handleCancel","setState","previewVisible","handlePreview","file","previewImage","url","thumbUrl","handleChange","fileList","event","fileArr","fileListArr","state","each","index","val","status","triggerChange","handleSuccess","result","pop","fileArrResult","push","join","handleRemove","config","getHeader","console","log","getUrl","uploadImgUrl","id","thisClass","delete","then","response","headers","setTokenHeader","openNotification","type","title","body","fileListResult","LoadingEnd","catch","error","getAuth","changedValue","onChange","Object","assign","clipboard","bind","undefined","length","filelistArr","split","fileUrlArr","fileUrlArrLength","filelist","uid","key","name","el","eq","find","remove","append","clone","click","uploadButton","uploadImgColumnName","width","display","map"],"mappings":"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","file":"CkeditorImg.js","sourcesContent":["import React, { Component } from 'react';\nimport Global from '../Global';\nimport { Upload, Icon, Modal } from 'antd';\nimport axios from 'axios';\n// import ReactDOM from 'react-dom';\nimport $ from 'jquery';\nimport Config from '../Modules/Config';\n\nclass CkeditorImg extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      previewVisible: false,\n      previewImage: '',\n      fileList: [],\n      // fileListShowPic: [],\n    };\n    this.clipboard = this.clipboard.bind(this);\n  }\n\n  componentDidMount(props){\n    // 如果出现length方法不能作用于undefined的报错 是配置项的错误此行代码没有错\n    if (this.props.fileList !== undefined && this.props.fileList!==null && this.props.fileList !== \"\" && this.props.fileList.length !== 0) {\n\n      let filelistArr = [];\n      \n      let fileArr = this.props.fileList.split(\",\");\n      // console.log(fileArr);\n      // let thisClass = this;\n      $.each(fileArr, function(index, val) {\n\n        let fileUrlArr = fileArr[index].split(\"/\");\n        let fileUrlArrLength = fileArr[index].split(\"/\").length;\n        let filelist = {};\n        filelist.uid = index;\n        filelist.key = index;\n        filelist.id = fileUrlArr[fileUrlArrLength - 2];\n        filelist.name = fileArr[index];\n        filelist.status = \"done\";\n        filelist.url = fileArr[index];\n        filelist.thumbUrl = fileArr[index];\n\n        filelistArr.push(filelist);\n        // filelistArrShowPic.push(filelistShowPic);\n\n      });\n\n      // console.log(filelistArr);\n      this.setState({ \n        fileList: filelistArr,\n        // fileListShowPic: filelistArrShowPic\n      });\n\n    }else {\n      this.setState({ \n        fileList: [], \n        // fileListShowPic: []\n      });\n    }\n\n  }\n\n  componentDidUpdate(){\n    let thisClass = this;\n\n    $(\".btnClipList .btnCkeditorImgUrl\").each(function(index, el) {\n      $(\".btnClipDoneList .ant-upload-list-item-done\").eq(index).find(\".ant-upload-list-item-actions\").find(\".btnCkeditorImgUrl\").remove();\n      $(\".btnClipDoneList .ant-upload-list-item-done\").eq(index).find(\".ant-upload-list-item-actions\").append($(this).clone());\n    });\n\n    // on('click', '.selector', function(event) {\n    //   event.preventDefault();\n    //   /* Act on the event */\n    // });\n\n    $(\".btnCkeditorImgUrl\").click(function(event) {\n      thisClass.clipboard();\n    });\n    \n  }\n\n  clipboard(){\n    Global.openNotification({type:\"success\", title:\"操作成功\", body:\"图片链接已复制。\"});\n  }\n\n  componentWillReceiveProps(props) {\n    // console.log(this.props.fileList.length);\n    if (this.props.fileList!==null && this.props.fileList !== \"\" && this.props.fileList.length !== 0) {\n\n      let filelistArr = [];\n      \n      let fileArr = this.props.fileList.split(\",\");\n      // console.log(fileArr);\n      // let thisClass = this;\n      $.each(fileArr, function(index, val) {\n\n        let fileUrlArr = fileArr[index].split(\"/\");\n        let fileUrlArrLength = fileArr[index].split(\"/\").length;\n        let filelist = {};\n        filelist.uid = index;\n        filelist.key = index;\n        filelist.id = fileUrlArr[fileUrlArrLength - 2];\n        filelist.name = fileArr[index];\n        filelist.status = \"done\";\n        filelist.url = fileArr[index];\n        filelist.thumbUrl = fileArr[index];\n        \n\n        filelistArr.push(filelist);\n\n      });\n\n      // console.log(filelistArr);\n      this.setState({ \n        fileList: filelistArr,\n      });\n\n    }else {\n      this.setState({ \n        fileList: [], \n        // fileListShowPic: []\n      });\n    }\n  }\n\n  handleCancel = () => this.setState({ previewVisible: false })\n\n  handlePreview = (file) => {\n    this.setState({\n      previewImage: \"\",\n    });\n    this.setState({\n      previewImage: file.url || file.thumbUrl,\n      previewVisible: true,\n    });\n  }\n\n  handleChange = ({ file, fileList, event }) => {\n\n    // console.log(file);\n    // console.log(fileList);\n    // console.log(event);\n    // console.log(this.state.fileList);\n\n    let fileArr = fileList;\n    let fileListArr = this.state.fileList;\n    $.each(fileListArr, function(index, val) {\n      if (fileArr[index] && fileArr[index].status === 'done') {\n        fileArr[index].url = fileListArr[index].url;\n      }\n    });\n\n    if (fileArr!==[]) {\n      this.setState({ \n        fileList: fileArr\n      });\n    }else{\n      this.triggerChange('');\n    }\n\n\n  }\n\n  handleSuccess = (result, file) => {\n    // console.log(result);\n    // console.log(file);\n\n    let fileArr = this.state.fileList;\n    fileArr.pop();\n    let fileArrResult = [];\n    fileArr.push(result);\n\n    $.each(fileArr, function(index, val) {\n      fileArrResult.push(fileArr[index].url);\n    });\n\n    // console.log(fileArrResult.join(','));\n    this.triggerChange(fileArrResult.join(','));\n  }\n\n  handleRemove = (file) => {\n    // const config = Global.getHeader();\n    const config = Global.getHeader();\n\n    console.log(Global.getUrl() + Config.uploadImgUrl() + \"/\" + file.id);\n    let thisClass = this;\n    axios.delete(Global.getUrl() + Config.uploadImgUrl() + \"/\" + file.id, config)\n      .then(response => {\n        console.log(response.headers);\n        if (response.headers[\"access-token\"]) {\n          Global.setTokenHeader(response);\n        }\n        Global.openNotification({type:\"success\", title:\"操作成功\", body:\"图片已删除。\"});\n\n        let fileList = this.state.fileList;\n        let fileListResult = [];\n        let fileArrResult = [];\n\n        $.each(fileList, function(index, val) {\n          if (fileList[index].id !== file.id) {\n            fileListResult.push(fileList[index]);\n            fileArrResult.push(fileList[index].url);\n          }\n        });\n        this.setState({ \n          fileList: fileListResult,\n        });\n        if (fileListResult!==[]) {\n          this.triggerChange(fileArrResult.join(','));\n        }else{\n          this.triggerChange('');\n        }\n\n        Global.LoadingEnd();\n      })\n      .catch(function (error) {\n        console.log(error);\n        console.log(error.response);\n        if (error.response.status === 404) {\n          Global.openNotification({type:\"success\", title:\"操作成功\", body:\"图片已删除。\"});\n\n          let fileList = thisClass.state.fileList;\n          let fileListResult = [];\n          let fileArrResult = [];\n          console.log(fileList);\n\n          $.each(fileList, function(index, val) {\n            if (fileList[index].id !== file.id) {\n              fileListResult.push(fileList[index]);\n              fileArrResult.push(fileList[index].url);\n            }\n          });\n\n          thisClass.setState({ \n            fileList: fileListResult,\n            // fileListShowPic: fileListResult\n          });\n\n          if (fileListResult!==[]) {\n            thisClass.triggerChange(fileArrResult.join(','));\n          }else{\n            thisClass.triggerChange('');\n          }\n\n        }else{\n          Global.openNotification({type:\"error\", title:\"操作失败\", body:\"请求超时，请刷新重试！\"});\n        }\n        Global.getAuth(error);\n        Global.LoadingEnd();\n      });\n  }\n\n  triggerChange = (changedValue) => {\n    // Should provide an event to pass value to Form.\n\n    const onChange = this.props.onChange;\n    if (onChange) {\n\n      // console.log(changedValue);\n      onChange(Object.assign(changedValue));\n\n    }\n\n  }\n\n  render() {\n    const { previewVisible, previewImage, fileList } = this.state;\n    const uploadButton = (\n      <div>\n        <Icon type=\"plus\" />\n        <div className=\"ant-upload-text\">上传图片</div>\n      </div>\n    );\n    \n    // const copyTips = \"复制成功!\";\n\n    return (\n      <div className=\"clearfix btnClipDoneList\">\n        <Upload\n          name={Config.uploadImgColumnName()}\n          action={Global.getUrl() + Config.uploadImgUrl() + \"/\"}\n          listType=\"picture-card\"\n          defaultFileList={fileList}\n          fileList={fileList}\n          headers={Global.getHeader()}\n          onPreview={this.handlePreview}\n          onChange={this.handleChange}\n          onRemove={this.handleRemove}\n          onSuccess={this.handleSuccess}\n        >\n\n          {fileList.length >= 20 ? null : uploadButton}\n        </Upload>\n        <Modal\n          wrapClassName=\"vertical-center-modal\"\n          width={\"auto\"}\n          visible={previewVisible} \n          footer={null} \n          onCancel={this.handleCancel}\n        >\n          <img alt=\"img\" style={{ width: '100%' }} src={previewImage} />\n        </Modal>\n        <div className=\"btnClipList\" style={{ display: 'none' }}>\n        {\n          fileList.map(file => \n            <i title=\"复制链接\" key={file.uid} className=\"anticon anticon-copy btnClip btnCkeditorImgUrl\" data-clipboard-text={file.url}></i>\n          )\n        }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CkeditorImg;"]}